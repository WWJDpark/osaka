<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ì‚¬ì¹´ ë¨¹ë°© & íë§ ì—¬í–‰ ê°€ì´ë“œ</title>
    <meta name="description" content="2026ë…„ 2ì›” 20ì¼~23ì¼, ì˜¤ì‚¬ì¹´ 3ë°• 4ì¼ ì—¬í–‰ ê°€ì´ë“œ. ë„í†¤ë³´ë¦¬, USJ, ë‚˜ë¼ ì‚¬ìŠ´ê³µì›ê¹Œì§€!">

    <!-- Open Graph / KakaoTalk Preview -->
    <meta property="og:title" content="ì˜¤ì‚¬ì¹´ ë¨¹ë°© & íë§ ì—¬í–‰ ê°€ì´ë“œ">
    <meta property="og:description" content="2026ë…„ 2ì›” 20ì¼~23ì¼, ì˜¤ì‚¬ì¹´ 3ë°• 4ì¼ ì—¬í–‰ ê°€ì´ë“œ.">
    <meta property="og:image"
        content="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?q=80&w=1200&auto=format&fit=crop">
    <meta property="og:type" content="website">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet CSS & JS (ì§€ë„) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        sakura: '#FFB7C5',
                        coral: '#FF6B6B',
                        sunset: '#FF8E53',
                        navy: '#1a1a2e',
                        deepblue: '#16213e',
                    },
                    fontFamily: {
                        sans: ['Noto Sans KR', 'sans-serif'],
                        display: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #FF6B6B, #FF8E53);
            border-radius: 10px;
        }

        /* ì§€ë„ ì»¨í…Œì´ë„ˆ */
        #map {
            height: 40vh;
            width: 100%;
            z-index: 10;
        }

        @media (min-width: 1024px) {
            #map {
                height: 100vh;
                position: sticky;
                top: 0;
            }
        }

        /* íƒ€ì„ë¼ì¸ ìŠ¤íƒ€ì¼ */
        .timeline-line {
            position: absolute;
            left: 24px;
            top: 48px;
            bottom: -16px;
            width: 3px;
            background: linear-gradient(180deg, #FF6B6B 0%, #FF8E53 50%, #FFB7C5 100%);
            z-index: 0;
            border-radius: 2px;
        }

        .last-item .timeline-line {
            display: none;
        }

        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-btn {
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, #FF6B6B, #FF8E53);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .tab-active::after {
            width: 80%;
        }

        .tab-active {
            color: #FF6B6B;
            font-weight: 700;
        }

        .tab-inactive {
            color: #64748b;
        }

        .tab-inactive:hover {
            color: #FF8E53;
        }

        /* ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ */
        .schedule-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .schedule-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -12px rgba(255, 107, 107, 0.25);
        }

        /* ì´ë¯¸ì§€ íš¨ê³¼ */
        .img-container {
            overflow: hidden;
        }

        .img-container img {
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .schedule-card:hover .img-container img {
            transform: scale(1.1);
        }

        /* í—¤ë” ê·¸ë¼ë””ì–¸íŠ¸ ì˜¤ë²„ë ˆì´ */
        .header-overlay {
            background: linear-gradient(to top,
                    rgba(26, 26, 46, 0.95) 0%,
                    rgba(26, 26, 46, 0.6) 40%,
                    rgba(26, 26, 46, 0.3) 70%,
                    transparent 100%);
        }

        /* í”Œë¡œíŒ… ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes pulse-soft {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        .pulse-soft {
            animation: pulse-soft 2s ease-in-out infinite;
        }

        /* ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ */
        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* ì§€ë„ ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
        .custom-marker {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            font-weight: bold;
            font-size: 14px;
            color: white;
        }

        /* íƒ­ ìˆ¨ê¹€ ìŠ¤í¬ë¡¤ë°” */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="overflow-x-hidden">

    <!-- ëª¨ë°”ì¼/íƒœë¸”ë¦¿ìš© ìƒë‹¨ í—¤ë” -->
    <header class="bg-navy text-white relative overflow-hidden lg:hidden h-72">
        <img src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?q=80&w=1200&auto=format&fit=crop"
            class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Osaka Night View">
        <div class="header-overlay absolute inset-0"></div>
        <div class="relative z-10 flex flex-col justify-end h-full p-6">
            <div
                class="inline-flex items-center gap-2 bg-gradient-to-r from-coral to-sunset text-white text-xs font-bold px-3 py-1 rounded-full mb-3 w-fit">
                <i data-lucide="calendar" class="w-3 h-3"></i>
                FEB 20 - FEB 23, 2026
            </div>
            <h1 class="text-3xl font-bold mb-2">ì˜¤ì‚¬ì¹´ ë¨¹ë°© & íë§ ì—¬í–‰</h1>
            <p class="text-sm text-gray-300 flex items-center gap-2">
                <i data-lucide="heart" class="w-4 h-4 text-sakura"></i>
                ì¦ê±°ìš´ ì˜¤ì‚¬ì¹´ ì—¬í–‰ ê°€ì´ë“œ
            </p>
        </div>
    </header>

    <div class="flex flex-col lg:flex-row min-h-screen">

        <!-- ì™¼ìª½ ì½˜í…ì¸  ì˜ì—­ -->
        <div
            class="w-full lg:w-[45%] lg:h-screen lg:overflow-y-auto custom-scroll bg-gradient-to-b from-white to-gray-50 relative z-20 shadow-2xl">

            <!-- ë°ìŠ¤í¬íƒ‘ìš© í—¤ë” -->
            <div class="hidden lg:block relative h-80 bg-navy text-white overflow-hidden shrink-0">
                <img src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?q=80&w=1200&auto=format&fit=crop"
                    class="absolute inset-0 w-full h-full object-cover opacity-80" alt="Osaka Night View">
                <div class="header-overlay absolute inset-0"></div>

                <!-- í”Œë¡œíŒ… ì´ëª¨ì§€ ë°ì½” -->
                <div class="absolute top-8 right-8 text-4xl float-animation">ğŸ¯</div>
                <div class="absolute top-20 right-24 text-2xl float-animation" style="animation-delay: 0.5s;">ğŸ£</div>

                <div class="relative z-10 flex flex-col justify-end h-full p-8">
                    <div
                        class="inline-flex items-center gap-2 bg-gradient-to-r from-coral to-sunset text-white text-sm font-bold px-4 py-2 rounded-full mb-4 w-fit shadow-lg">
                        <i data-lucide="calendar" class="w-4 h-4"></i>
                        FEB 20 - FEB 23, 2026 (ê¸ˆ - ì›”)
                    </div>
                    <h1 class="text-4xl font-bold mb-3 leading-tight">
                        ì˜¤ì‚¬ì¹´ ë¨¹ë°© & íë§ ì—¬í–‰
                    </h1>
                    <p class="text-lg text-gray-300 flex items-center gap-2">
                        <i data-lucide="heart" class="w-5 h-5 text-sakura pulse-soft"></i>
                        ì¦ê±°ìš´ ì˜¤ì‚¬ì¹´ ì—¬í–‰ ê°€ì´ë“œ
                    </p>
                </div>
            </div>

            <!-- ë‚ ì§œ ì„ íƒ íƒ­ -->
            <div class="sticky top-0 glass z-30 shadow-sm border-b border-gray-100/50">
                <div class="flex overflow-x-auto no-scrollbar">
                    <button onclick="changeDay(0)" id="tab-0"
                        class="tab-btn flex-1 py-4 px-3 text-center whitespace-nowrap tab-active">
                        <span class="block text-xs text-gray-400 mb-1">2/20 (ê¸ˆ)</span>
                        <span class="block text-sm">1ì¼ì°¨</span>
                        <span class="block text-[10px] text-gray-500 mt-0.5">ë‚˜ë¼ íë§</span>
                    </button>
                    <button onclick="changeDay(1)" id="tab-1"
                        class="tab-btn flex-1 py-4 px-3 text-center whitespace-nowrap tab-inactive">
                        <span class="block text-xs text-gray-400 mb-1">2/21 (í† )</span>
                        <span class="block text-sm">2ì¼ì°¨</span>
                        <span class="block text-[10px] text-gray-500 mt-0.5">USJ ì˜¬ì¸</span>
                    </button>
                    <button onclick="changeDay(2)" id="tab-2"
                        class="tab-btn flex-1 py-4 px-3 text-center whitespace-nowrap tab-inactive">
                        <span class="block text-xs text-gray-400 mb-1">2/22 (ì¼)</span>
                        <span class="block text-sm">3ì¼ì°¨</span>
                        <span class="block text-[10px] text-gray-500 mt-0.5">ì˜¤ì‚¬ì¹´ ê´€ê´‘</span>
                    </button>
                    <button onclick="changeDay(3)" id="tab-3"
                        class="tab-btn flex-1 py-4 px-3 text-center whitespace-nowrap tab-inactive">
                        <span class="block text-xs text-gray-400 mb-1">2/23 (ì›”)</span>
                        <span class="block text-sm">4ì¼ì°¨</span>
                        <span class="block text-[10px] text-gray-500 mt-0.5">ì‹œì¥ & ê·€êµ­</span>
                    </button>
                </div>
            </div>

            <!-- ì¼ì • ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ -->
            <div id="itinerary-list" class="p-6 pb-24 lg:pb-12 min-h-screen lg:min-h-0">
                <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë‚´ìš©ì´ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
            </div>

            <!-- í‘¸í„° -->
            <div class="p-6 pt-0 text-center text-xs text-gray-400">
                <p>Enjoy your Trip! ğŸ’•</p>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì§€ë„ ì˜ì—­ -->
        <div class="w-full lg:w-[55%] relative bg-gray-100">
            <div id="map"></div>

            <!-- ì§€ë„ ë²”ë¡€ -->
            <div
                class="absolute top-4 right-4 glass p-4 rounded-2xl shadow-xl z-[500] text-xs space-y-3 hidden md:block">
                <div class="font-bold text-gray-700 mb-2 flex items-center gap-2">
                    <i data-lucide="map-pin" class="w-4 h-4"></i>
                    ë²”ë¡€
                </div>
                <div class="flex items-center gap-3">
                    <span class="w-4 h-4 rounded-full bg-gradient-to-br from-coral to-sunset shadow-sm"></span>
                    <span class="text-gray-600">ì‹ì‚¬/ë§›ì§‘</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="w-4 h-4 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 shadow-sm"></span>
                    <span class="text-gray-600">ê´€ê´‘/í™œë™</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="w-4 h-4 rounded-full bg-gradient-to-br from-amber-400 to-yellow-500 shadow-sm"></span>
                    <span class="text-gray-600">í˜¸í…”/ì´ë™</span>
                </div>
            </div>

            <!-- í˜„ì¬ ë‚ ì§œ í‘œì‹œ -->
            <div
                class="absolute bottom-4 left-4 glass px-4 py-2 rounded-full shadow-lg z-[500] text-sm font-medium text-gray-700 hidden md:flex items-center gap-2">
                <i data-lucide="navigation" class="w-4 h-4 text-coral"></i>
                <span id="current-day-label">1ì¼ì°¨ ê²½ë¡œ</span>
            </div>
        </div>
    </div>

    <script>
        // --- ìƒ‰ìƒ ë° ì•„ì´ì½˜ ì„¤ì • ---
        const colors = {
            food: '#FF6B6B',
            spot: '#3b82f6',
            hotel: '#f59e0b',
            cafe: '#FF6B6B',
            shop: '#8b5cf6',
            train: '#f59e0b'
        };

        const gradients = {
            food: 'from-coral to-sunset',
            spot: 'from-blue-400 to-blue-600',
            hotel: 'from-amber-400 to-yellow-500',
            cafe: 'from-coral to-sunset',
            shop: 'from-purple-400 to-purple-600',
            train: 'from-amber-400 to-yellow-500'
        };

        const badgeColors = {
            food: 'bg-gradient-to-r from-red-100 to-orange-100 text-red-700',
            spot: 'bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700',
            hotel: 'bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700',
            cafe: 'bg-gradient-to-r from-red-100 to-orange-100 text-red-700',
            shop: 'bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700',
            train: 'bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700'
        };

        const icons = {
            food: 'utensils',
            spot: 'camera',
            hotel: 'bed',
            cafe: 'coffee',
            shop: 'shopping-bag',
            train: 'train-front'
        };

        // --- ë°ì´í„° ì •ì˜ (ì´ë¯¸ì§€: ë””ìì¸ íƒ€ì´í‹€ ì¹´ë“œ ì ìš©) ---
        const scheduleData = [
            // 1ì¼ì°¨
            {
                date: "2ì›” 20ì¼ (ê¸ˆ)",
                title: "ë„ì°© & ë‚˜ë¼ íë§",
                summary: "ì§ í’€ê³  ê·œì¹´ì¸  ë¨¹ê³  ë‚˜ë¼ ì‚¬ìŠ´ê³µì›ìœ¼ë¡œ!",
                emoji: "ğŸ¦Œ",
                locations: [
                    {
                        time: "14:30",
                        title: "í˜¸í…” ì²´í¬ì¸",
                        type: "hotel",
                        desc: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”. ìœ„ì¹˜ ê¹¡íŒ¨! ì§ë§Œ ë§¡ê¸°ê³  ë°”ë¡œ ì¶œë°œ.",
                        tip: "í”„ë¡ íŠ¸ì— ì—¬ê¶Œ ì œì‹œ í•„ìš”",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Hotel+Check-in&font=montserrat",
                        details: {
                            hours: "ì²´í¬ì¸ 15:00 / ì²´í¬ì•„ì›ƒ 11:00",
                            price: "1ë°• ì•½ 80,000ì›",
                            address: "ì˜¤ì‚¬ì¹´ë¶€ ì˜¤ì‚¬ì¹´ì‹œ ì£¼ì˜¤êµ¬ ë‚œë°” 4-2-1"
                        }
                    },
                    {
                        time: "15:00",
                        title: "ëª¨í† ë¬´ë¼ ê·œì¹´ì¸ ",
                        type: "food",
                        tag: "ì ì‹¬ ì¶”ì²œ â­",
                        desc: "í˜¸í…” ë„ë³´ 3ë¶„! í™”ë¡œì— ì‚´ì§ êµ¬ì›Œ ì™€ì‚¬ë¹„ì™€ í•¨ê»˜. í•œêµ­ì¸ ì›í”½ ë§›ì§‘!",
                        tip: "ì›¨ì´íŒ… ê¸¸ë©´ ì˜†ì§‘ 'êµí†  ê°€ì¸ ê·œ' ì¶”ì²œ",
                        lat: 34.6653, lng: 135.5015,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Motomura+Gyukatsu&font=montserrat",
                        details: {
                            hours: "11:00 - 22:00 (ë¼ìŠ¤íŠ¸ì˜¤ë” 21:30)",
                            price: "ê·œì¹´ì¸  ì„¸íŠ¸ 1,500ì—”",
                            address: "ë‚œë°” ì›Œí¬ ì§€í•˜ìƒê°€ ë‚´"
                        }
                    },
                    {
                        time: "16:30",
                        title: "ë‚˜ë¼ ì‚¬ìŠ´ê³µì›",
                        type: "spot",
                        tag: "íë§ ğŸ¦Œ",
                        desc: "ì‚¬ìŠ´ë“¤ì—ê²Œ ì„¼ë² ì´ë¥¼ ì£¼ë©° êµê°! ì¸ì‚¬ë„ í•œë‹µë‹ˆë‹¤.",
                        tip: "ë‚˜ë¼ì—­ì—ì„œ ë„ë³´ 15ë¶„",
                        lat: 34.6850, lng: 135.8430,
                        img: "https://placehold.co/800x500/3b82f6/ffffff?text=Nara+Deer+Park&font=montserrat",
                        details: {
                            hours: "24ì‹œê°„ ê°œë°©",
                            price: "ë¬´ë£Œ (ì„¼ë² ì´ 200ì—”)",
                            address: "ë‚˜ë¼ì‹œ ì¡°ì‹œì´ˆ 469"
                        }
                    },
                    {
                        time: "18:00",
                        title: "í† ë‹¤ì´ì§€ (ëŒ€ë¶ˆì „)",
                        type: "spot",
                        tag: "ê´€ê´‘",
                        desc: "ì„¸ê³„ ìµœëŒ€ ëª©ì¡°ê±´ë¬¼ê³¼ 15m ëŒ€ë¶ˆìƒ!",
                        tip: "ê¸°ë‘¥ êµ¬ë© í†µê³¼ ë„ì „",
                        lat: 34.6890, lng: 135.8398,
                        img: "https://placehold.co/800x500/3b82f6/ffffff?text=Todaiji+Temple&font=montserrat",
                        details: {
                            hours: "07:30 - 17:30",
                            price: "ëŒ€ë¶ˆì „ 600ì—”",
                            address: "ë‚˜ë¼ì‹œ ì¡°ì‹œì´ˆ 406-1"
                        }
                    },
                    {
                        time: "19:30",
                        title: "ì¡±ë°œì˜ ì¹´ë„ì•¼",
                        type: "food",
                        tag: "ì €ë…/ì•¼ì‹",
                        desc: "ëœ¯ëŠ” ë§›ì´ ìµœê³ ì¸ ì¡±ë°œ ì¡°ë¦¼! ë§¥ì£¼ ë¬´í•œ í¡ì… ê°€ëŠ¥.",
                        tip: "ì˜ˆì•½ ì¶”ì²œ",
                        lat: 34.6670, lng: 135.5000,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Kadoya+Pork&font=montserrat",
                        details: { hours: "17:00 - 23:00", price: "ì¡±ë°œ ì„¸íŠ¸ 2,500ì—”", address: "ë‚œë°”" }
                    },
                    {
                        time: "21:00",
                        title: "ë„í†¤ë³´ë¦¬ & ê¸€ë¦¬ì½”ìƒ",
                        type: "spot",
                        tag: "ì•¼ê²½",
                        desc: "ì˜¤ì‚¬ì¹´ì˜ ì‹¬ì¥! ê¸€ë¦¬ì½”ìƒ ì•ì—ì„œ ê°™ì€ í¬ì¦ˆë¡œ ì¸ì¦ìƒ·.",
                        tip: "ëˆí‚¤í˜¸í…Œë„ êµ¬ê²½",
                        lat: 34.6687, lng: 135.5013,
                        img: "https://placehold.co/800x500/3b82f6/ffffff?text=Dotonbori+Glico&font=montserrat",
                        details: {
                            hours: "24ì‹œê°„ (ì•¼ê²½ ì¶”ì²œ ì‹œê°„ 19:00-23:00)",
                            price: "ë¬´ë£Œ",
                            address: "ì˜¤ì‚¬ì¹´ì‹œ ì£¼ì˜¤êµ¬ ë„í†¤ë³´ë¦¬"
                        }
                    },
                    {
                        time: "22:30",
                        title: "í‚¨ë¥˜ë¼ë©˜",
                        type: "food",
                        tag: "ì•¼ì‹",
                        desc: "ìš© ê°„íŒì´ ìˆëŠ” ì•¼ì™¸ ë¼ë©˜ì§‘. ê¹€ì¹˜ì™€ ë¶€ì¶” íŒíŒ!",
                        tip: "24ì‹œê°„ ì˜ì—…",
                        lat: 34.6685, lng: 135.5030,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Kinryu+Ramen&font=montserrat",
                        details: {
                            hours: "24ì‹œê°„ ì˜ì—…",
                            price: "ë¼ë©˜ 800ì—”",
                            address: "ë„í†¤ë³´ë¦¬ ë³¸ì "
                        }
                    },
                    {
                        time: "23:30",
                        title: "ìˆ™ì†Œ ë³µê·€",
                        type: "hotel",
                        tag: "íœ´ì‹ ğŸ˜´",
                        desc: "ì˜¤ëŠ˜ í•˜ë£¨ ê³ ìƒí–ˆì–´! í‘¹ ì‰¬ê³  ë‚´ì¼ USJë¥¼ ìœ„í•´ ì¶©ì „.",
                        tip: "íœ´ì‹ ë° ë‚´ì¼ ì¤€ë¹„",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Return+to+Hotel&font=montserrat",
                        details: { hours: "-", price: "-", address: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”" }
                    }
                ]
            },
            // 2ì¼ì°¨
            {
                date: "2ì›” 21ì¼ (í† )",
                title: "USJ ì˜¬ì¸ & ì² íŒìš”ë¦¬",
                summary: "ë™ì‹¬ì˜ ì„¸ê³„ USJì™€ ì˜¤ì‚¬ì¹´ í•„ìˆ˜ ë¨¹ë°© ì½”ìŠ¤!",
                emoji: "ğŸ¢",
                locations: [
                    {
                        time: "07:00",
                        title: "ìˆ™ì†Œ ì¶œë°œ",
                        type: "hotel",
                        tag: "USJ ì˜¤í”ˆëŸ°!",
                        desc: "ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ìµìŠ¤í”„ë ˆìŠ¤ ì—†ì´ë„ ì¦ê¸°ê¸° ìœ„í•´ ì¼ì° ì¶œë°œ!",
                        tip: "í¸í•œ ì‹ ë°œ í•„ìˆ˜",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Depart+from+Hotel&font=montserrat",
                        details: { hours: "-", price: "-", address: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”" }
                    },
                    {
                        time: "07:30",
                        title: "í¸ì˜ì  ì¡°ì‹",
                        type: "food",
                        tag: "ì•„ì¹¨",
                        desc: "ì˜¤í”ˆëŸ° í•„ìˆ˜! íƒ€ë§ˆê³  ì‚°ë„ì™€ ì˜¤ë‹ˆê¸°ë¦¬ë¡œ ì´ë™í•˜ë©° í•´ê²°.",
                        tip: "ë¡œì† or ì„¸ë¸ì¼ë ˆë¸ ì¶”ì²œ",
                        lat: 34.6640, lng: 135.5025,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Convenience+Store&font=montserrat",
                        details: { hours: "24ì‹œê°„", price: "500-1,000ì—”", address: "í˜¸í…” ì¸ê·¼" }
                    },
                    {
                        time: "08:30",
                        title: "ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬",
                        type: "spot",
                        tag: "ì˜¬ë°ì´ ğŸ®",
                        desc: "í•´ë¦¬í¬í„°, ë‹Œí…ë„ ì›”ë“œ ì •ë³µ! í•˜ë£¨ ì¢…ì¼ ì‹ ë‚˜ê²Œ!",
                        tip: "ìµìŠ¤í”„ë ˆìŠ¤ íŒ¨ìŠ¤ êµ¬ë§¤ ì¶”ì²œ",
                        lat: 34.6654, lng: 135.4323,
                        img: "https://placehold.co/800x500/3b82f6/ffffff?text=Universal+Studios+Japan&font=montserrat",
                        details: { hours: "09:00 - 21:00 (ê³„ì ˆë³„ ìƒì´)", price: "1ì¼ê¶Œ 8,900ì—”", address: "ì˜¤ì‚¬ì¹´ì‹œ ì½”ë…¸í•˜ë‚˜êµ¬ ì‚¬ì¿ ë¼ì§€ë§ˆ 2-1-33" }
                    },
                    {
                        time: "12:30",
                        title: "ì“°ë¦¬ ë¸Œë£¸ìŠ¤í‹±ìŠ¤",
                        type: "food",
                        tag: "ì ì‹¬",
                        desc: "í•´ë¦¬í¬í„° ì¡´ ë§›ì§‘! ì˜¥ìˆ˜ìˆ˜ êµ¬ì´ì™€ ë²„í„°ë¹„ì–´ í•„ìˆ˜.",
                        tip: "ì•¼ì™¸ í…Œë¼ìŠ¤ì„ ê°•ì¶”",
                        lat: 34.6660, lng: 135.4330,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Three+Broomsticks&font=montserrat",
                        details: { hours: "USJ ìš´ì˜ì‹œê°„ ë™ì¼", price: "ì„¸íŠ¸ 2,500ì—”", address: "USJ í•´ë¦¬í¬í„° êµ¬ì—­ ë‚´" }
                    },
                    {
                        time: "19:30",
                        title: "ì•„ì§€ë…¸ì•¼ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤",
                        type: "food",
                        tag: "ì €ë…",
                        desc: "ë¯¹ìŠ¤ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ì™€ ì•¼í‚¤ì†Œë°”! Bì„¸íŠ¸ ê°€ì„±ë¹„ ìµœê³ .",
                        tip: "ë¯¸ì¦ˆë…¸ë„ ì¢‹ì•„ìš”",
                        lat: 34.6680, lng: 135.5008,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Ajinoya+Okonomiyaki&font=montserrat",
                        details: { hours: "11:30 - 22:00", price: "1,500ì—”", address: "ë„í†¤ë³´ë¦¬ ë³¸ì " }
                    },
                    {
                        time: "21:30",
                        title: "íƒ€ì½”ì•¼í‚¤ & ë§ˆíŠ¸ í„¸ê¸°",
                        type: "food",
                        tag: "ì•¼ì‹ ğŸ£",
                        desc: "ì•—ì¹˜ì¹˜í˜¼í¬ íƒ€ì½”ì•¼í‚¤ì™€ ê·¼ì²˜ ë¼ì´í”„ ë§ˆì¼“ì—ì„œ ë§ˆíŠ¸ ì´ˆë°¥, ë§¥ì£¼ ì‚¬ì˜¤ê¸°!",
                        tip: "ìˆ™ì†Œì—ì„œ í¸í•˜ê²Œ ì•¼ì‹ íŒŒí‹° ğŸ»",
                        lat: 34.6615, lng: 135.4950,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Takoyaki+and+Market&font=montserrat",
                        details: { hours: "ë¼ì´í”„ ë§ˆì¼“ 24:00ê¹Œì§€", price: "ì˜ˆì‚° 2,000ì—” ë‚´ì™¸", address: "Life Namba (ë¼ì´í”„ ë§ˆì¼“ ë‚œë°”ì )" }
                    },
                    {
                        time: "23:00",
                        title: "ìˆ™ì†Œ ë³µê·€",
                        type: "hotel",
                        tag: "íœ´ì‹ ğŸ˜´",
                        desc: "ë§ˆíŠ¸ì—ì„œ ì‚¬ì˜¨ ìŒì‹ë“¤ê³¼ í•¨ê»˜ í•˜ë£¨ ë§ˆë¬´ë¦¬.",
                        tip: "í‘¹ ìê¸°",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Return+to+Hotel&font=montserrat",
                        details: { hours: "-", price: "-", address: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”" }
                    }
                ]
            },
            // 3ì¼ì°¨
            {
                date: "2ì›” 22ì¼ (ì¼)",
                title: "ì˜¤ì‚¬ì¹´ ê´€ê´‘ & ë¡œì»¬ ìˆ ì§‘",
                summary: "ë‹ˆì¿ ìŠ¤ì´ë¡œ ë“ ë“ í•˜ê²Œ ì‹œì‘! ì˜¤ì‚¬ì¹´ì„±ê³¼ ì‹ ì„¸ì¹´ì´ ì •ë³µ!",
                emoji: "ğŸ¯",
                locations: [
                    {
                        time: "08:00",
                        title: "ìˆ™ì†Œ ì¶œë°œ",
                        type: "hotel",
                        tag: "ì˜¤ì‚¬ì¹´ ë³¸ê²© íˆ¬ì–´",
                        desc: "ë‹ˆì¿ ìŠ¤ì´ ë¨¹ìœ¼ëŸ¬ ì¼ì° ì¶œë°œ!",
                        tip: "ì§€í•˜ì²  ì´ìš©",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Depart+from+Hotel&font=montserrat",
                        details: { hours: "-", price: "-", address: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”" }
                    },
                    {
                        time: "08:30",
                        title: "ì´ì¹˜í›„ì§€ ì‹ë‹¹",
                        type: "food",
                        tag: "ì•„ì¹¨ ì¶”ì²œ â­",
                        desc: "ì•„ì¹¨ì€ ë“ ë“ í•˜ê²Œ! ê³ ê¹ƒêµ­(ë‹ˆì¿ ìŠ¤ì´)ìœ¼ë¡œ í•´ì¥.",
                        tip: "í˜„ì§€ì¸ ë§›ì§‘",
                        lat: 34.6918, lng: 135.5172,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Ichifuji+Shokudo&font=montserrat",
                        details: { hours: "07:00 - 14:00", price: "ë‹ˆì¿ ìŠ¤ì´ 900ì—”", address: "ã€’530-0043 Osaka, Kita Ward, Tenma, 2 Chomeâˆ’13âˆ’16" }
                    },
                    {
                        time: "10:00",
                        title: "ì˜¤ì‚¬ì¹´ ì„±",
                        type: "spot",
                        tag: "ê´€ê´‘",
                        desc: "ì˜¤ì‚¬ì¹´ì˜ ëœë“œë§ˆí¬! ì²œìˆ˜ê° ë°°ê²½ìœ¼ë¡œ ì‚¬ì§„ í•„ìˆ˜.",
                        tip: "ì…ì¥ë£Œ 600ì—”",
                        lat: 34.6873, lng: 135.5262,
                        img: "https://placehold.co/800x500/3b82f6/ffffff?text=Osaka+Castle&font=montserrat",
                        details: { hours: "09:00 - 17:00", price: "ì²œìˆ˜ê° ì…ì¥ë£Œ 600ì—”", address: "ì˜¤ì‚¬ì¹´ì‹œ ì£¼ì˜¤êµ¬ ì˜¤ì‚¬ì¹´ì¡° 1-1" }
                    },
                    {
                        time: "13:00",
                        title: "(ê·¼ì²˜ ìš°ë™ ë§›ì§‘ íƒë°©!)",
                        type: "food",
                        tag: "ììœ ì¼ì • ğŸœ",
                        desc: "ì˜¤ì‚¬ì¹´ì„± ì£¼ë³€ì˜ ìˆ¨ì€ ìš°ë™ ë§›ì§‘ë“¤ì„ ì§ì ‘ ì°¾ì•„ë³´ëŠ” ì¬ë¯¸!",
                        tip: "êµ¬ê¸€ ë§µì—ì„œ í‰ì  ë†’ì€ ê³³ìœ¼ë¡œ ê³¨ë¼ê°€ê¸°",
                        lat: 34.6850, lng: 135.5240,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Local+Udon+Tour&font=montserrat",
                        details: { hours: "ì‹ë‹¹ë³„ ìƒì´", price: "ì•½ 1,000ì—”", address: "ì˜¤ì‚¬ì¹´ì„± ì¸ê·¼ ìš°ë™ ì „ë¬¸ì " }
                    },
                    {
                        time: "15:00",
                        title: "ì¸ í…ì¹´ì¿  & ì‹ ì„¸ì¹´ì´",
                        type: "spot",
                        tag: "ê´€ê´‘",
                        desc: "ë ˆíŠ¸ë¡œí•œ ì˜¤ì‚¬ì¹´ ê°ì„± ê±°ë¦¬. í™”ë ¤í•œ ê°„íŒë“¤ êµ¬ê²½!",
                        tip: "ì•¼ê²½ì´ ì˜ˆìœ ì‹œê°„ëŒ€",
                        lat: 34.6525, lng: 135.5063,
                        img: "https://placehold.co/800x500/3b82f6/ffffff?text=Tsutenkaku+Shinsekai&font=montserrat",
                        details: { hours: "10:00 - 20:00", price: "íƒ€ì›Œ ì…ì¥ë£Œ 800ì—”", address: "ì˜¤ì‚¬ì¹´ì‹œ ë‚˜ë‹ˆì™€êµ¬ ì—ë¹„ìŠ¤íˆê°€ì‹œ" }
                    },
                    {
                        time: "19:00",
                        title: "ì¿ ì‹œì¹´ì¸  ë‹¤ë£¨ë§ˆ",
                        type: "food",
                        tag: "ì €ë…",
                        desc: "ì˜¤ì‚¬ì¹´ ëª…ë¬¼ íŠ€ê¹€ ê¼¬ì¹˜! 'ì†ŒìŠ¤ ë‘ ë²ˆ ì°ê¸° ê¸ˆì§€' ë£° ì§€í‚¤ê¸°~",
                        tip: "ë§¥ì£¼ì™€ í•¨ê»˜ ğŸº",
                        lat: 34.6517, lng: 135.5065,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Kushikatsu+Daruma&font=montserrat",
                        details: {
                            hours: "11:00 - 22:30",
                            price: "1ì¸ë‹¹ 2,000ì—” ë‚´ì™¸",
                            address: "ì‹ ì„¸ì¹´ì´ ë³¸ì "
                        }
                    },
                    {
                        time: "21:00",
                        title: "ëˆí‚¤í˜¸í…Œ ì‡¼í•‘",
                        type: "shop",
                        tag: "ì‡¼í•‘ ğŸ›ï¸",
                        desc: "ì˜¤ì‚¬ì¹´ ì—¬í–‰ì˜ í•„ìˆ˜ ì½”ìŠ¤! ê°€ì¡±, ì¹œêµ¬ ì„ ë¬¼ì´ë‘ ê°„ì‹ í„¸ê¸°.",
                        tip: "5,000ì—” ì´ìƒ ë©´ì„¸ í˜œíƒ ì±™ê¸°ì„¸ìš”",
                        lat: 34.6687, lng: 135.5031,
                        img: "https://placehold.co/800x500/8b5cf6/ffffff?text=Don+Quijote&font=montserrat",
                        details: { hours: "24ì‹œê°„ ì˜ì—…", price: "ë©´ì„¸ ê°€ëŠ¥", address: "ëˆí‚¤í˜¸í…Œ ë„í†¤ë³´ë¦¬ì " }
                    },
                    {
                        time: "23:00",
                        title: "ìˆ™ì†Œ ë³µê·€",
                        type: "hotel",
                        tag: "íœ´ì‹ ğŸ˜´",
                        desc: "ì‡¼í•‘í•œ ì§ë“¤ ì •ë¦¬í•˜ê³  ê¿€ì  ìê¸°.",
                        tip: "ë§ˆì§€ë§‰ ë°¤ ì•¼ì‹ ê¸ˆì§€(?)",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Return+to+Hotel&font=montserrat",
                        details: { hours: "-", price: "-", address: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”" }
                    }
                ]
            },
            // 4ì¼ì°¨
            {
                date: "2ì›” 23ì¼ (ì›”)",
                title: "ì‹œì¥ ë¨¹ë°© & ê·€êµ­",
                summary: "êµ¬ë¡œëª¬ ì‹œì¥ì—ì„œ ë§ˆì§€ë§‰ ë¨¹ë°© í›„ ì•ˆë…• ì˜¤ì‚¬ì¹´!",
                emoji: "âœˆï¸",
                locations: [
                    {
                        time: "07:30",
                        title: "ìˆ™ì†Œ ì¶œë°œ",
                        type: "hotel",
                        tag: "ë§ˆì§€ë§‰ ë‚  ì‹œì‘",
                        desc: "ì§ ë‹¤ ì±™ê²¨ì„œ ë¡œë¹„ì— ë§¡ê¸°ê³  ì¶œë°œ!",
                        tip: "ìŠìœ¼ì‹  ë¬¼ê±´ ì—†ë‚˜ìš”?",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Depart+from+Hotel&font=montserrat",
                        details: { hours: "-", price: "-", address: "ì†Œí…Œì¸  í”„ë ˆì‚¬ ì¸ ì˜¤ì‚¬ì¹´ ë‚œë°”" }
                    },
                    {
                        time: "08:00",
                        title: "æœˆç›— (ê²Ÿí† )",
                        type: "food",
                        tag: "ì•„ì¹¨ ì¶”ì²œ â­",
                        desc: "í­ì‹ í­ì‹  ê³„ë€ë§ì´(ë‹¤ì‹œë§ˆí‚¤ íƒ€ë§ˆê³ )ë¡œ ìœ ëª…í•œ íƒ€ë‹ˆë§ˆì¹˜ ë§›ì§‘!",
                        tip: "ê³„ë€ë§ì´ ì •ì‹ í•„ìˆ˜",
                        lat: 34.6842, lng: 135.5147,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Getto+Tamagoyaki&font=montserrat",
                        details: { hours: "08:00 - 15:00", price: "ê³„ë€ë§ì´ ì •ì‹ 1,200ì—”", address: "ã€’540-0025 Osaka, Chuo Ward, Tokuicho, 1 Chomeâˆ’4âˆ’10 ã‚¤ãƒ¼ã‚¹ã‚¿ãƒ³èˆ¹å ´ãƒ“ãƒ«" }
                    },
                    {
                        time: "10:00",
                        title: "ì²´í¬ì•„ì›ƒ",
                        type: "hotel",
                        tag: "ì²´í¬ì•„ì›ƒ",
                        desc: "ì•„ì‰¬ìš´ ì²´í¬ì•„ì›ƒ... ì§ ë§¡ê¸°ê³  ê°€ë³ê²Œ ì‹œì¥ìœ¼ë¡œ!",
                        tip: "ì§ ë³´ê´€ ê°€ëŠ¥",
                        lat: 34.6635, lng: 135.5020,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Check-out&font=montserrat",
                        details: { hours: "11:00ê¹Œì§€", price: "-", address: "í˜¸í…”" }
                    },
                    {
                        time: "10:30",
                        title: "êµ¬ë¡œëª¬ ì‹œì¥ íˆ¬ì–´",
                        type: "food",
                        tag: "ë¨¹ë°© ğŸ£",
                        desc: "ì°¸ì¹˜íšŒ, ê°€ë¦¬ë¹„ ë²„í„°êµ¬ì´, ê³ ë² ê·œ ê¼¬ì¹˜, ë”¸ê¸° ëª¨ì°Œ! ë¨¹ê³  ì‹¶ì€ ê²ƒ ë‹¤!",
                        tip: "ì˜¤ì‚¬ì¹´ì˜ ë¶€ì—Œ",
                        lat: 34.6655, lng: 135.5065,
                        img: "https://placehold.co/800x500/FF6B6B/ffffff?text=Kuromon+Market&font=montserrat",
                        details: { hours: "09:00 - 17:00", price: "1ì¸ 3,000-5,000ì—”", address: "ì˜¤ì‚¬ì¹´ì‹œ ì£¼ì˜¤êµ¬ ë‹ˆí°ë°”ì‹œ 2-4-1" }
                    },
                    {
                        time: "11:30",
                        title: "ë‚œë°”ì—­ â†’ ê°„ì‚¬ì´ ê³µí•­",
                        type: "train",
                        tag: "ì´ë™",
                        desc: "ë¼í”¼íŠ¸ íŠ¹ê¸‰ íƒ‘ìŠ¹! í˜¸í…”ì—ì„œ ì§ ì°¾ê³  ê³µí•­ìœ¼ë¡œ.",
                        tip: "ì•½ 45ë¶„ ì†Œìš”",
                        lat: 34.6641, lng: 135.5006,
                        img: "https://placehold.co/800x500/f59e0b/ffffff?text=Airport+Express&font=montserrat",
                        details: { hours: "-", price: "ë¼í”¼íŠ¸ 1,450ì—”", address: "ë‚œë°”ì—­" }
                    }
                ]
            }
        ];

        // --- ì§€ë„ ë° ë¡œì§ ì´ˆê¸°í™” ---
        let map;
        let markers = [];
        let polyline;
        let currentDayIndex = 0;

        function initMap() {
            if (map) return;

            const mapContainer = document.getElementById('map');
            if (!mapContainer) return;

            // ì´ˆê¸° ì¤‘ì‹¬ì¢Œí‘œ (ë‚œë°”)
            map = L.map('map', {
                zoomControl: false
            }).setView([34.6653, 135.5015], 14);

            // ì¤Œ ì»¨íŠ¸ë¡¤ ìœ„ì¹˜ ë³€ê²½
            L.control.zoom({
                position: 'bottomright'
            }).addTo(map);

            // [ë³€ê²½ì™„ë£Œ] êµ¬ê¸€ë§µ (í•œê¸€ ì ìš©)
            // êµ¬ê¸€ë§µ íƒ€ì¼ ì„œë²„ ì‚¬ìš© (hl=ko ì˜µì…˜ìœ¼ë¡œ í•œê¸€ í‘œê¸°)
            L.tileLayer('http://{s}.google.com/vt/lyrs=m&hl=ko&x={x}&y={y}&z={z}', {
                maxZoom: 20,
                subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
                attribution: '&copy; Google Maps'
            }).addTo(map);

            renderDay(0);
            if (window.lucide) lucide.createIcons();
        }

        function toggleDetails(index) {
            const detailsEl = document.getElementById(`details-${index}`);
            const chevronEl = document.querySelector(`.detail-chevron-${index}`);

            if (detailsEl.classList.contains('hidden')) {
                detailsEl.classList.remove('hidden');
                if (chevronEl) {
                    chevronEl.style.transform = 'rotate(180deg)';
                }
            } else {
                detailsEl.classList.add('hidden');
                if (chevronEl) {
                    chevronEl.style.transform = 'rotate(0deg)';
                }
            }

            // ì•„ì´ì½˜ ë‹¤ì‹œ ë Œë”ë§
            if (window.lucide) lucide.createIcons();
        }

        function changeDay(index) {
            if (!map) initMap();
            renderDay(index);
        }

        function createCustomIcon(type, index) {
            let color = colors.spot;
            if (type === 'food' || type === 'cafe') color = colors.food;
            if (type === 'hotel' || type === 'train') color = colors.hotel;
            if (type === 'shop') color = colors.shop;

            return L.divIcon({
                className: 'custom-div-icon',
                html: `
                    <div class="custom-marker" style="background: linear-gradient(135deg, ${color}, ${color}dd);">
                        ${index + 1}
                    </div>
                `,
                iconSize: [36, 36],
                iconAnchor: [18, 18],
                popupAnchor: [0, -18]
            });
        }

        function renderDay(index) {
            currentDayIndex = index;
            const data = scheduleData[index];

            // í˜„ì¬ ë‚ ì§œ ë¼ë²¨ ì—…ë°ì´íŠ¸
            const dayLabel = document.getElementById('current-day-label');
            if (dayLabel) {
                dayLabel.textContent = `${index + 1}ì¼ì°¨ ê²½ë¡œ ${data.emoji}`;
            }

            // íƒ­ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('button[id^="tab-"]').forEach((btn, idx) => {
                if (idx === index) {
                    btn.classList.remove('tab-inactive');
                    btn.classList.add('tab-active');
                } else {
                    btn.classList.remove('tab-active');
                    btn.classList.add('tab-inactive');
                }
            });

            // ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
            const listContainer = document.getElementById('itinerary-list');
            listContainer.innerHTML = '';

            // ë‚ ì§œ í—¤ë”
            const headerHtml = `
                <div class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-3xl">${data.emoji}</span>
                        <div>
                            <h2 class="text-xl font-bold text-gray-800">${data.title}</h2>
                            <p class="text-sm text-gray-500">${data.summary}</p>
                        </div>
                    </div>
                </div>
            `;
            listContainer.insertAdjacentHTML('beforeend', headerHtml);

            data.locations.forEach((loc, i) => {
                const isLast = i === data.locations.length - 1;
                const badgeColor = badgeColors[loc.type] || badgeColors.spot;
                const iconName = icons[loc.type] || 'map-pin';
                const gradient = gradients[loc.type] || gradients.spot;

                const html = `
                    <div class="relative pl-14 py-3 group ${isLast ? 'last-item' : ''}" data-location-index="${i}">
                        <!-- íƒ€ì„ë¼ì¸ ë¼ì¸ -->
                        <div class="timeline-line"></div>
                        
                        <!-- íƒ€ì„ë¼ì¸ ë²ˆí˜¸ -->
                        <div class="absolute left-0 top-5 w-12 flex justify-center z-10">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br ${gradient} flex items-center justify-center text-white font-bold text-sm shadow-lg transition-transform group-hover:scale-110">
                                ${i + 1}
                            </div>
                        </div>

                        <!-- ì¹´ë“œ -->
                        <div class="schedule-card bg-white rounded-2xl shadow-md border border-gray-100/50 overflow-hidden">
                            <div class="flex flex-col sm:flex-row cursor-pointer" onclick="focusMap(${i})">
                                <div class="w-full sm:w-2/5 h-48 sm:h-auto relative img-container">
                                    <img src="${loc.img}" 
                                         onerror="this.src='https://images.unsplash.com/photo-1480796927426-f609979314bd?q=80&w=800&auto=format&fit=crop'" 
                                         class="absolute inset-0 w-full h-full object-cover" 
                                         alt="${loc.title}"
                                         loading="lazy">
                                    <!-- ì‹œê°„ ë±ƒì§€ -->
                                    <div class="absolute top-3 left-3 bg-black/60 backdrop-blur-sm text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5">
                                        <i data-lucide="clock" class="w-3 h-3"></i>
                                        ${loc.time}
                                    </div>
                                </div>
                                <div class="w-full sm:w-3/5 p-5 flex flex-col justify-center">
                                    <div class="flex items-center gap-2 mb-2 flex-wrap">
                                        ${loc.tag ? `<span class="text-[11px] font-bold px-2.5 py-1 rounded-full ${badgeColor}">${loc.tag}</span>` : ''}
                                    </div>
                                    <h3 class="text-lg font-bold text-gray-800 mb-2 group-hover:text-coral transition-colors flex items-center gap-2">
                                        <i data-lucide="${iconName}" class="w-4 h-4 text-gray-400"></i>
                                        ${loc.title}
                                    </h3>
                                    <p class="text-sm text-gray-600 leading-relaxed mb-2">${loc.desc}</p>
                                    ${loc.tip ? `
                                        <div class="flex items-center gap-2 text-xs text-gray-400 mt-1">
                                            <i data-lucide="lightbulb" class="w-3 h-3"></i>
                                            <span>${loc.tip}</span>
                                        </div>
                                    ` : ''}
                                    ${loc.details ? `
                                        <button onclick="event.stopPropagation(); toggleDetails(${i})" 
                                                class="mt-3 text-xs text-coral font-medium flex items-center gap-1 hover:gap-2 transition-all">
                                            <span>ìƒì„¸ì •ë³´</span>
                                            <i data-lucide="chevron-down" class="w-3 h-3 detail-chevron-${i}"></i>
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                            ${loc.details ? `
                                <div id="details-${i}" class="hidden border-t border-gray-100 bg-gray-50/50 p-5 space-y-2">
                                    <div class="flex items-start gap-2 text-sm">
                                        <i data-lucide="clock" class="w-4 h-4 text-coral mt-0.5 flex-shrink-0"></i>
                                        <div>
                                            <span class="font-medium text-gray-700">ìš´ì˜ì‹œê°„:</span>
                                            <span class="text-gray-600 ml-1">${loc.details.hours}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-2 text-sm">
                                        <i data-lucide="banknote" class="w-4 h-4 text-coral mt-0.5 flex-shrink-0"></i>
                                        <div>
                                            <span class="font-medium text-gray-700">ê°€ê²©:</span>
                                            <span class="text-gray-600 ml-1">${loc.details.price}</span>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-2 text-sm">
                                        <i data-lucide="map-pin" class="w-4 h-4 text-coral mt-0.5 flex-shrink-0"></i>
                                        <div>
                                            <span class="font-medium text-gray-700">ì£¼ì†Œ:</span>
                                            <span class="text-gray-600 ml-1">${loc.details.address}</span>
                                        </div>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                listContainer.insertAdjacentHTML('beforeend', html);
            });
            if (window.lucide) lucide.createIcons();

            updateMapMarkers(data.locations);
        }

        function updateMapMarkers(locations) {
            if (!map) return;

            // ê¸°ì¡´ ë§ˆì»¤ ë° ë¼ì¸ ì œê±°
            markers.forEach(marker => map.removeLayer(marker));
            if (polyline) map.removeLayer(polyline);
            markers = [];

            const latlngs = [];

            locations.forEach((loc, i) => {
                const marker = L.marker([loc.lat, loc.lng], { icon: createCustomIcon(loc.type, i) })
                    .addTo(map)
                    .bindPopup(`
                        <div class="font-sans p-1 min-w-[200px]">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="bg-coral text-white text-xs font-bold px-2 py-0.5 rounded-full">${loc.time}</span>
                            </div>
                            <h3 class="font-bold text-sm mb-1">${loc.title}</h3>
                            <p class="text-xs text-gray-600">${loc.desc}</p>
                        </div>
                    `, {
                        className: 'custom-popup'
                    });

                markers.push(marker);
                latlngs.push([loc.lat, loc.lng]);
            });

            // ê²½ë¡œ ê·¸ë¦¬ê¸° (ê·¸ë¼ë””ì–¸íŠ¸ íš¨ê³¼)
            polyline = L.polyline(latlngs, {
                color: '#FF6B6B',
                weight: 4,
                opacity: 0.7,
                dashArray: '12, 8',
                lineCap: 'round',
                lineJoin: 'round'
            }).addTo(map);

            // ëª¨ë“  ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì¤Œ ì¡°ì ˆ
            if (markers.length > 0) {
                const group = new L.featureGroup(markers);
                map.fitBounds(group.getBounds(), { padding: [60, 60] });
            }
        }

        function focusMap(index) {
            const marker = markers[index];
            if (marker && map) {
                map.setView(marker.getLatLng(), 16, { animate: true, duration: 0.5 });
                setTimeout(() => marker.openPopup(), 300);
            }
            // ëª¨ë°”ì¼ì—ì„œëŠ” ì§€ë„ë¡œ ìŠ¤í¬ë¡¤ ì´ë™
            if (window.innerWidth < 1024) {
                const mapEl = document.getElementById('map');
                if (mapEl) mapEl.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // ì´ˆê¸° ì‹¤í–‰
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMap);
        } else {
            initMap();
        }

    </script>
</body>

</html>